Description
-----------------
torrent-queue is a program which accepts messages from rtorrent and logs them
to a log file. When rtorrent tells it that a torrent has finished,
torrent-queue inspects the downloaded content, and if it is a rar archive (or
a directory a rar archive, or a directory with CD[1-9] directories which have
rar archives), it will unrar said archives as long as they contain no more
than a single file or directory.

torrent-announce follows the log file created by torrent-queue and announces
any new/finished torrents on IRC, along with the user who added it, the size,
and the time (and average download speed) it took to download it.


Dependencies
-----------------
rtorrent >= 0.8.4
unrar (Debian folks: that means the nonfree version)
Perl and the following Perl modules:
    List::Util
    POE::Component::IRC
    DateTime::Format::Human::Duration

You can install the Perl modules with this command:
    cpan List::Util POE::Component::IRC DateTime::Format::Human::Duration


Installation
-----------------
Put torrent-queue and torrent-announce somewhere on your filesystem. Make sure
they're executable. torrent-queue needs to be executable by the user that's
running rtorrent.

Create the file /tmp/torrentlog and have it owned by the rtorrent user, e.g.:

    touch /tmp/torrentlog
    sudo chown leech /tmp/torrentlog

Edit torrent-queue and change $complete_dir so it knows where your
torrent content goes when it has completed downloading.


rtorrent configuration
-----------------
.rtorrent.rc must have the following lines in it. But change
/home/leech/utor/ to wherever you keep your copy of torrent-queue

    # torrent-queue hooks
    system.method.set_key = event.download.inserted_new,utor_inserted_new,"execute=/home/leech/utor/torrent-queue,inserted_new,$d.get_hash=,$d.get_size_bytes=1,$d.get_loaded_file=1"
    system.method.set_key = event.download.finished,utor_finished,"execute=/home/leech/utor/torrent-queue,finished,$d.get_hash=,$d.get_size_bytes=1,$d.get_loaded_file=1,$d.get_name=1"


Running
-----------------
Restart rtorrent after you've edited .rtorrent.rc as instructed above. Then
start the torrent-announce bot. By default it is configured to connect to an
IRC proxy/bouncer on port 50445, using the contents of bouncer_pass.txt (in
the current directory) as the password. You can change this by editing
torrent-announce.

torrent-announce has been tested with the App::Bondage IRC proxy, you
can install it as:

    cpan App::Bondage

See the App::Bondage documentation for further information.
